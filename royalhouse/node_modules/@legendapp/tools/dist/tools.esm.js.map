{"version":3,"file":"tools.esm.js","sources":["../src/animationFrameOnce.ts","../src/arrayFunctions.ts","../src/is.ts","../src/MemoFnComponent.tsx","../src/ResizeObserver.ts","../src/timeoutOnce.ts","../src/useEverHadValue.ts","../src/useForceRender.ts","../src/useMakeRef.ts","../src/usePrevious.ts","../src/useStateWithRef.ts","../src/useInterval.ts","../src/useComponentSize.ts"],"sourcesContent":["const animationFrames: Record<string, number> = {};\n\nexport function hasAnimationFrameOnce(name: string) {\n    return !!animationFrames[name];\n}\nexport function animationFrameOnce(name: string, cb: Function) {\n    const t = animationFrames[name];\n\n    if (t) {\n        cancelAnimationFrame(t);\n    }\n\n    animationFrames[name] = requestAnimationFrame(() => {\n        delete animationFrames[name];\n\n        cb();\n    });\n}\nexport function clearAnimationFrameOnce(name: string) {\n    const t = animationFrames[name];\n\n    if (t) {\n        cancelAnimationFrame(t);\n\n        delete animationFrames[name];\n    }\n}\n","export function arrayRemove<T>(array: T[], value: T) {\n    const index = array.indexOf(value);\n    if (index >= 0) {\n        array.splice(index, 1);\n    }\n\n    return index;\n}\n\nexport function arrayRemoveAt<T>(array: T[], index: number) {\n    return array.splice(index, 1)[0];\n}\n\n// Binary search to find insertion index\nfunction arrayFindInsertIndex<T>(array: T[], ele: T, comp: (a: T, b: T) => number) {\n    let low = 0;\n    let high = array.length - 1;\n\n    while (low <= high) {\n        const i = (low + high) >> 1;\n        const c = comp(array[i], ele);\n\n        if (c < 0) {\n            low = i + 1;\n        } else if (c > 0) {\n            high = i - 1;\n        } else {\n            return i;\n        }\n    }\n\n    return low;\n}\n\nexport function arrayInsertSorted<T>(array: T[], ele: T, comp: (a: T, b: T) => number) {\n    const idx = arrayFindInsertIndex(array, ele, comp);\n\n    array.splice(idx, 0, ele);\n\n    return idx;\n}\n","export function isArray(obj: unknown): obj is Array<any> {\n    return Array.isArray(obj);\n}\nexport function isString(obj: unknown): obj is string {\n    return typeof obj === 'string';\n}\nexport function isObject(obj: unknown): obj is Record<any, any> {\n    return typeof obj === 'object' && obj !== null && !isArray(obj);\n}\nexport function isNumber(obj: unknown): obj is number {\n    return typeof obj === 'number' && !isNaN(obj);\n}\nexport function isBoolean(obj: unknown): obj is boolean {\n    return obj === true || obj === false;\n}\nexport function isFunction(obj: unknown): obj is Function {\n    return typeof obj === 'function';\n}\n","import React, { Component, ComponentType, createElement, forwardRef, memo, ReactNode } from 'react';\n\ntype TypeOnError = (error: Error, info: ErrorInfo) => boolean | void;\n\ninterface PropsErrorBoundary {\n    onError?: TypeOnError;\n    children: ReactNode;\n}\ninterface StateErrorBoundary {\n    error?: Error;\n}\n\nexport interface ErrorInfo {\n    componentStack: string;\n}\n\nexport interface Config {\n    onError?: TypeOnError;\n}\n\nlet _config: Config = {};\n\nexport function ConfigureMemoFnComponent(config: Config) {\n    _config = config || {};\n}\n\nclass ErrorBoundary extends Component<PropsErrorBoundary, StateErrorBoundary> {\n    constructor(props: any) {\n        super(props);\n        this.state = {\n            error: null,\n        };\n    }\n    componentDidCatch(error: Error, info: ErrorInfo): void {\n        if (_config.onError) {\n            try {\n                let handled: boolean | undefined;\n                if (this.props.onError) {\n                    handled = this.props.onError(error, info) as boolean | undefined;\n                }\n\n                if (!handled) {\n                    _config.onError(error, info);\n                }\n            } catch (ignoredError) {\n                console.log(ignoredError);\n            }\n        }\n\n        this.setState({ error });\n    }\n\n    render() {\n        const { children } = this.props;\n        const { error } = this.state;\n\n        if (error !== null) {\n            debugger;\n            return null;\n        }\n\n        return children || null;\n    }\n}\n\nexport function MemoFnComponent<T extends ComponentType<any>>(Component: T, onError?: TypeOnError): T {\n    onError = onError || _config.onError;\n    let out = Component as any;\n    if (onError) {\n        out = (props: any) => <ErrorBoundary>{createElement(Component, Object.assign({ onError }, props))}</ErrorBoundary>;\n    }\n    return (memo(out) as unknown) as T;\n}\n\nexport function MemoFnComponentWithRef<T extends ComponentType<any>>(Component: T, onError?: TypeOnError): T {\n    let out = Component as any;\n    if (onError || _config.onError) {\n        const Wrapped = (props: any, ref: any) => (\n            <ErrorBoundary>{createElement(Component, Object.assign({ onError, ref }, props))}</ErrorBoundary>\n        );\n        out = forwardRef(Wrapped);\n    }\n\n    return (memo(out) as unknown) as T;\n}\n","// @ts-ignore\nlet ResizeObserver = typeof window !== 'undefined' && window?.ResizeObserver;\n\nconst polyfillResizeObserver = function polyfillResizeObserver(resizeObserver: any) {\n    // @ts-ignore\n    ResizeObserver = window?.ResizeObserver || resizeObserver;\n};\n\nexport { ResizeObserver, polyfillResizeObserver };\n","const timeouts: Record<string, any> = {};\n\nexport function hasTimeoutOnce(name: string) {\n    return !!timeouts[name];\n}\nexport function timeoutOnce(name: string, cb: Function, time: number, ...args: any[]) {\n    const t = timeouts[name];\n\n    if (t) {\n        clearTimeout(t);\n    }\n\n    timeouts[name] = setTimeout(() => {\n        delete timeouts[name];\n\n        cb(...args);\n    }, time);\n}\nexport function clearTimeoutOnce(name: string) {\n    const t = timeouts[name];\n\n    if (t) {\n        clearTimeout(t);\n\n        delete timeouts[name];\n    }\n}\n","import { useRef } from 'react';\n\nexport const useEverHadValue = function useEverHadValue(value: any, targetValue: any) {\n    const ref = useRef<boolean>(false);\n    ref.current = ref.current || value === targetValue;\n\n    return ref.current;\n};\n","import { useReducer } from 'react';\n\nexport function useForceRender() {\n    const [, forceRender] = useReducer(s => s + 1, 0);\n    return forceRender as () => void;\n}\n","import { MutableRefObject, useRef } from 'react';\n\nexport function useMakeRef<T>(value: T): MutableRefObject<T | undefined> {\n    const ref = useRef<T>();\n    ref.current = value;\n    return ref;\n}\n","import { useRef } from 'react';\n\nexport function usePrevious<T>(value: T) {\n    const ref = useRef<T>();\n    const ret = ref.current;\n    ref.current = value;\n    return ret;\n}\n","import { Dispatch, MutableRefObject, SetStateAction, useCallback, useRef, useState } from 'react';\nimport { isFunction } from './is';\n\nexport function useStateWithRef<T>(initialValue?: T | (() => T)): [T | undefined, Dispatch<SetStateAction<T>>, MutableRefObject<T>] {\n    const [value, setValue] = useState(initialValue);\n    const ref = useRef<T>(value);\n\n    // Set wraps around useState's set and saves to ref\n    const set = useCallback((v: T | ((prevState: T) => T)) => {\n        if (isFunction(v)) {\n            v = v(ref.current);\n        }\n        ref.current = v;\n        setValue(v);\n    }, []);\n\n    return [value, set, ref];\n}\n","import { useEffect } from 'react';\n\nexport function useInterval(cb: () => void, ms: number) {\n    useEffect(() => {\n        const int = setInterval(() => {\n            cb();\n        }, ms);\n\n        return () => clearInterval(int);\n    }, [ms, cb]);\n}\n","import { RefObject, useCallback, useEffect, useLayoutEffect, useRef } from 'react';\nimport { ResizeObserver } from './ResizeObserver';\nimport { useForceRender } from './useForceRender';\n\nfunction getSize(el: HTMLElement): { width: number; height: number } {\n    return el\n        ? {\n              width: el.offsetWidth,\n              height: el.offsetHeight,\n          }\n        : {\n              width: 0,\n              height: 0,\n          };\n}\n\nexport const useComponentSize = function useComponentSize(ref: RefObject<HTMLElement>): { width: number; height: number } {\n    const refSize = useRef<{ width: number; height: number }>({ width: 0, height: 0 });\n    const fr = useForceRender();\n\n    const handleResize = useCallback(() => {\n        if (ref.current) {\n            const oldSize = refSize.current;\n            const newSize = getSize(ref.current);\n            if (newSize && (newSize.width !== oldSize.width || newSize.height !== oldSize.height)) {\n                refSize.current = newSize;\n                fr();\n            }\n        }\n    }, [ref, fr]);\n\n    // @ts-ignore\n    useLayoutEffect(() => {\n        const el = ref.current;\n        if (el) {\n            handleResize();\n\n            let resizeObserver = new ResizeObserver(handleResize);\n            resizeObserver.observe(el);\n\n            return () => {\n                resizeObserver.disconnect();\n                resizeObserver = undefined;\n            };\n        }\n    }, [ref.current]); // eslint-disable-line react-hooks/exhaustive-deps\n\n    return refSize.current;\n};\n\nexport const useComponentSizeChange = function useComponentSizeChange(\n    ref: RefObject<HTMLElement>,\n    cb: (value: { width: number; height: number }) => void\n) {\n    const refSize = useRef<{ width: number; height: number }>({ width: 0, height: 0 });\n\n    const handleResize = useCallback(() => {\n        if (ref.current) {\n            const oldSize = refSize.current;\n            const newSize = getSize(ref.current);\n            if (newSize && (newSize.width !== oldSize.width || newSize.height !== oldSize.height)) {\n                refSize.current = newSize;\n                cb?.(newSize);\n            }\n        }\n    }, [ref, cb]);\n\n    // @ts-ignore\n    useEffect(() => {\n        const el = ref.current;\n        if (el) {\n            handleResize();\n\n            let resizeObserver = new ResizeObserver(handleResize);\n            resizeObserver.observe(el);\n\n            return () => {\n                resizeObserver.disconnect();\n                resizeObserver = undefined;\n            };\n        }\n    }, [ref.current]); // eslint-disable-line react-hooks/exhaustive-deps\n\n    return refSize.current;\n};\n"],"names":["animationFrames","hasAnimationFrameOnce","name","animationFrameOnce","cb","t","cancelAnimationFrame","requestAnimationFrame","clearAnimationFrameOnce","arrayRemove","array","value","index","indexOf","splice","arrayRemoveAt","arrayFindInsertIndex","ele","comp","low","high","length","i","c","arrayInsertSorted","idx","isArray","obj","Array","isString","isObject","isNumber","isNaN","isBoolean","isFunction","_config","ConfigureMemoFnComponent","config","ErrorBoundary","props","state","error","componentDidCatch","info","onError","handled","ignoredError","console","log","setState","render","children","Component","MemoFnComponent","out","React","createElement","Object","assign","memo","MemoFnComponentWithRef","Wrapped","ref","forwardRef","ResizeObserver","window","polyfillResizeObserver","resizeObserver","timeouts","hasTimeoutOnce","timeoutOnce","time","args","clearTimeout","setTimeout","clearTimeoutOnce","useEverHadValue","targetValue","useRef","current","useForceRender","useReducer","s","forceRender","useMakeRef","usePrevious","ret","useStateWithRef","initialValue","useState","setValue","set","useCallback","v","useInterval","ms","useEffect","int","setInterval","clearInterval","getSize","el","width","offsetWidth","height","offsetHeight","useComponentSize","refSize","fr","handleResize","oldSize","newSize","useLayoutEffect","observe","disconnect","undefined","useComponentSizeChange"],"mappings":"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"}